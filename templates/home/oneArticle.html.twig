{% extends 'base.html.twig' %}

{% block title %}
	{{article.title}}
	|
	{{parent()}}
{% endblock %}

{% block body %}
	<div class="container">

		<h1 class="text-center">{{article.title}}</h1>


		<div class="container d-flex flex-wrap justify-content-between">

			<div class="card m-1 border-0">
				<img src="{{asset(article.imageUrl)}}" class="card-img-top shadow" alt="image article {{article.title}}" style="aspect-ratio:3/2; width:100%;height: 300px;">
				<div class="card-body">
					<h5 class="card-title text-center">{{article.title}}</h5>

					<h6 class="card-subtitle mb-2 text-dark">
						{% set categoryName ="" %}
						{# je déclare une variable vide  qui va contenir le nom de la catégorie#}

						{% for category in article.categories %}

							<a href="/category/{{category.name}}" class="badge badge bg-info text-capitalize text-wrap text-decoration-none">{{category.name}}
							</a>

							{% set categoryName = category.name %}
							{# je stocke le nom de la catégorie dans la variable categoryName#}
						{% endfor %}
					</h6>


					<p class="card-text">{{article.content | raw }}</p>


					<footer class="blockquote-footer fw-bold author-name mt-4">
						Publié le
						{{article.createdAt| date('d/m/Y')}}
						par
						{{article.author.fullname}}
					</footer>

					{#Vérifier si l'utilisateur connecté est celui qui a créer l'article#}

					{% if app.user is same as (article.author) %}

						<div class="d-flex justify-content-evenly">
							<a href="{{path('app_article_edit', {'id':article.id})}}" class="btn btn-warning mt-5">Modifier l'article</a>							
						</div>
					{% endif %}


					<div class="card-footer text-center border-0 bg-white">
						<small class="text-muted fw-bold">
							{#Afficher le nombre d'article dans chaque catégorie#}
							{% for category in article.categories %}
								{{category.name}} ({{category.articles|length}} articles publiés)<br>
							{% endfor %}

							
						</small>
					</div>

					<div class="d-flex justify-content-evenly">
						<a href="{{path('app_home')}}" class="btn btn-primary mt-5">Retourné à l'accueil</a>

						<a href="/category/{{categoryName}}" class="btn btn-dark mt-5">Retourné à la catégorie</a>
					</div>
				</div>
			</div>
		</div>


	</div>

{% endblock %}
